(function(){var app,deep,__indexOf=[].indexOf||function(item){for(var i=0,l=this.length;l>i;i++)if(i in this&&this[i]===item)return i;return-1};Array.prototype.remove=function(){var L,a,ax,what;for(what=void 0,a=arguments,L=a.length,ax=void 0;L&&this.length;)for(what=a[--L];-1!==(ax=this.indexOf(what));)this.splice(ax,1);return this},Array.prototype.insert=function(index,item){return this.splice(index,0,item)},Array.prototype.append=function(other){return Array.prototype.push.apply(this,other)},Array.prototype.prepend=function(another){return Array.prototype.unshift.apply(this,another)},Array.prototype.join2=function(one,two){var str;return null==one&&(one=", "),null==two&&(two=" and "),this.length<=1?this.join(two):(str="",str+=this.slice(0,-1).join(one),str+=two+this.slice(-1)[0])},"undefined"!=typeof module&&null!==module&&(_=require("lodash")),_.defaultsDeep=_.partialRight(_.merge,deep=function(value,other){return _.merge(value,other,deep)}),_.isHash=function(val){return _.isObject(val)&&!_.isArray(val)},_.formatTel=function(tel,onlyDashes){var city,country,number,value;if(null==onlyDashes&&(onlyDashes=!1),!tel)return"";if(value=tel.toString().trim().replace(/^\+/,""),value.match(/[^0-9]/))return tel;switch(country=void 0,city=void 0,number=void 0,value.length){case 10:country=1,city=value.slice(0,3),number=value.slice(3);break;case 11:country=value[0],city=value.slice(1,4),number=value.slice(4);break;case 12:country=value.slice(0,3),city=value.slice(3,5),number=value.slice(5);break;default:return tel}return 1===country&&(country=""),number=number.slice(0,3)+"-"+number.slice(3),onlyDashes?(((null!=country?country.length:void 0)?country+"-":"")+city+"-"+number).trim():(country+" ("+city+") "+number).trim()},_.formatHeight=function(cm){var INCH_TO_CM,feet,inches,rem;if(null!=cm)return INCH_TO_CM=2.54,inches=cm/INCH_TO_CM,feet=Math.floor(inches/12),rem=Math.round(inches%12),12===rem&&(feet+=1,rem=0),""+feet+"'"+rem+'"'},_.formatWeight=function(kg){var KG_TO_POUNDS;if(null!=kg)return KG_TO_POUNDS=2.20462,(kg>91?kg:Math.floor(kg*KG_TO_POUNDS))+"lbs"},_.wordTrim=function(str,MAX_LENGTH,ellipses){var hasTrimmedWords,i,origI;if(null==MAX_LENGTH&&(MAX_LENGTH=40),null==ellipses&&(ellipses=!1),ellipses&&(MAX_LENGTH-=3),str=str.trim(),i=Math.min(MAX_LENGTH,str.length),origI=i,void 0!==str[i]&&" "!==str[i])for(;" "!==str[i]&&i>=0;)i-=1;return hasTrimmedWords=i!==origI,str=-1===i?str.substring(0,MAX_LENGTH):str.substring(0,i),ellipses&&hasTrimmedWords&&(str+="..."),str},_.pickGood=function(obj,omit){var clone,k,v;if(null==omit&&(omit=[]),null!=obj){clone={};for(k in obj)v=obj[k],"_"===k[0]||_.isFunction(v)||__indexOf.call(omit,k)>=0||(clone[k]=v);return clone}},_.changed=function(cur,old){var changed,k,v;changed=_.clone(cur);for(k in old)v=old[k],void 0===changed[k]?changed[k]=null:_.isEqual(changed[k],v)&&delete changed[k];return changed},"undefined"!=typeof module&&null!==module&&(module.exports=_),"function"!=typeof String.prototype.startsWith&&(String.prototype.startsWith=function(str){return this.slice(0,str.length)===str}),"function"!=typeof String.prototype.endsWith&&(String.prototype.endsWith=function(str){return this.slice(-str.length)===str}),"function"!=typeof String.prototype.addCommas&&(String.prototype.addCommas=function(){var rgx,str,x,x1,x2;for(str=this,str+="",x=str.split("."),x1=x[0],x2=x.length>1?"."+x[1]:"",rgx=/(\d+)(\d{3})/;rgx.test(x1);)x1=x1.replace(rgx,"$1,$2");return x1+x2}),"function"!=typeof String.prototype.lpad&&(String.prototype.lpad=function(padString,length){var str;for(str=this;str.length<length;)str=padString+str;return str}),"function"!=typeof String.prototype.rpad&&(String.prototype.rpad=function(padString,length){var str;for(str=this;str.length<length;)str+=padString;return str}),"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),"function"!=typeof String.prototype.capitalize&&(String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)}),"function"!=typeof String.prototype.ellipses&&(String.prototype.ellipses=function(maxLength){return null==maxLength&&(maxLength=140),this.length>maxLength?this.substring(0,maxLength-3)+"...":this}),app=angular.module(conf.app.site_name,["ngRoute","ngAnimate","ngCookies","angularMoment","angular-loading-bar","perfect_scrollbar","infinite-scroll","angularFileUpload","nya.bootstrap.select","oc.lazyLoad"]),app.config(function($logProvider){return $logProvider.debugEnabled(conf.app.console.debug)}),app.config(function(cfpLoadingBarProvider){return cfpLoadingBarProvider.includeBar=!0,cfpLoadingBarProvider.includeSpinner=!1,cfpLoadingBarProvider.latencyThreshold=100}),app.run(function($rootScope,$location,$routeParams,$window,$http,$templateCache,$filter,$log){return FastClick.attach(document.body),$log.info("App loaded"),mixpanel.track("Landed"),$rootScope.env=env,$rootScope.conf=conf,$rootScope.isBinding=function(){var _ref;return"$apply"===(_ref=$rootScope.$$phase)||"$digest"===_ref},$rootScope.safeApply=function(){return $rootScope.isBinding()?void 0:$rootScope.$apply()},$rootScope.onLoaded=function(next){return setTimeout(function(){return function(){return 0!==$rootScope.ajaxCount||$rootScope.isBinding()?$rootScope.onLoaded(next):"function"==typeof next?next():void 0}}(this),800)},$rootScope.template=function(){var template,_i,_len;for(_i=0,_len=arguments.length;_len>_i;_i++)if(template=arguments[_i],template=$filter("urlFormat")(template),$templateCache.get(template))return template}}),app.controller("HomeCtrl",function($rootScope,$scope){var Subscribe;return Subscribe=function(){function Subscribe(){}return Subscribe.prototype.send=function(){return null!=this.name&&this.email?(mixpanel.identify(this.email),mixpanel.people.set({$name:this.name,$email:this.email,$last_login:new Date}),mixpanel.track("Subscribe",{name:this.name,email:this.email}),this.sent=!0):void 0},Subscribe}(),$scope.subscribe=new Subscribe}),angular.module("perfect_scrollbar",[]).directive("perfectScrollbar",function($parse,$timeout){return{restrict:"E",transclude:!0,template:"<div><div ng-transclude></div></div>",replace:!0,link:function($scope,$elem,$attr){$elem.perfectScrollbar({wheelSpeed:$parse($attr.wheelSpeed)()||50,wheelPropagation:$parse($attr.wheelPropagation)()||!1,minScrollbarLength:$parse($attr.minScrollbarLength)()||!1,useBothWheelAxes:$parse($attr.useBothWheelAxes)()||!1,suppressScrollX:$parse($attr.suppressScrollX)()||!1,suppressScrollY:$parse($attr.suppressScrollY)()||!1}),$attr.refreshOnChange&&$scope.$watchCollection($attr.refreshOnChange,function(){$timeout(function(){return $elem.perfectScrollbar("update")},10),"bottom"===$attr.dock&&$timeout(function(){return $elem.animate({scrollTop:$elem[0].scrollHeight})},200)}),$elem.bind("$destroy",function(){$elem.perfectScrollbar("destroy")})}}}),app.directive("responsive",function($window,$timeout,$rootScope){return{restrict:"E",scope:{containerLg:"@",containerMd:"@",containerSm:"@"},link:function($scope,$element){var changeContainer;changeContainer=function(){var $newParent;return $newParent=null,$newParent=angular.element($rootScope.layout.lt("md")?$scope.containerSm:$scope.containerMd),(null!=$newParent?$newParent.attr("id"):void 0)!==$element.parent().attr("id")?$element.appendTo($newParent):void 0},changeContainer(),$(window).on("resize",changeContainer),$element.bind("$destroy",function(){return $(window).off("resize",changeContainer)})}}}),app.filter("readable",function(){return function(obj){return obj?_.isArray(obj)?obj.join(", "):_.isString(obj)?obj:JSON.stringify(obj):""}}),app.filter("urlFormat",function(){return function(str){return(null!=str?str.length:void 0)?str.toLowerCase().replace(" ","-"):""}}),app.factory("opHttp",function($q,$log,$location,$rootScope){var timeout;return timeout=conf.app.ui.timeout,{request:function(config){var _ref;return config.timeout=timeout,config.withCredentials=!0,$rootScope.ajaxCount=(null!=(_ref=$rootScope.ajaxCount)?_ref:0)+1,$rootScope.busy||config.background||($rootScope.busy=!0),"GET"!==config.method&&null!=config.data&&(config.data=_.pickGood(config.data)),config||$q.when(config)},response:function(response){return $rootScope.ajaxCount&&$rootScope.ajaxCount--,$rootScope.busy&&0===$rootScope.ajaxCount&&($rootScope.busy=!1),response||$q.when(response)},responseError:function(rejection){var done,_ref,_ref1,_ref2;switch($rootScope.ajaxCount&&$rootScope.ajaxCount--,done=function(){return $rootScope.busy&&0===$rootScope.ajaxCount&&($rootScope.busy=!1),$q.reject(rejection)},rejection.status){case 0:(_ref=rejection.config.url)!==ContextProvider.getUserUrl&&_ref!==ContextProvider.loginUrl&&rejection.config.background!==!0&&alert("There seems to be an internet network issue. Please try again.","info").show(null,5e3);break;case 403:return alert("You are unauthorized to perform this action","warning").show(),done();case 401:return(_ref1=rejection.config.url)!==ContextProvider.getUserUrl&&_ref1!==ContextProvider.loginUrl&&(null!=$rootScope.authUser&&(MixpanelService.trackHttpRejection(rejection),confirm("It appears you are no longer logged in. Do you want to login?").show(function(ok){return ok?$rootScope.nav.to("login"):void 0})),$rootScope.deauthenticate()),done()}return MixpanelService.trackHttpRejection(rejection),_.isEmpty(rejection.data)?done():(alert(null!=(_ref2=rejection.data.error)?_ref2:rejection.data,"warning").show(),done())}}}),app.config(function($routeProvider,$locationProvider,$httpProvider){return $httpProvider.interceptors.push("opHttp"),$routeProvider.when("/",{title:"Home",controller:"HomeCtrl",templateUrl:"tmpl/home.html"}).otherwise({redirectTo:"/"}),$locationProvider.html5Mode({enabled:!0,requireBase:!1}).hashPrefix("!")})}).call(this);
//# sourceMappingURL=app.min.js.map